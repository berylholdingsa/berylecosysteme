# Environment variables example
# Copy this file to .env and fill in the values

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/beryl_db

# JWT
JWT_SECRET_KEY=your-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60
JWT_SIGNING_KEYS_JSON={"default":"replace-with-strong-jwt-signing-key"}
JWT_ACTIVE_KID=default
JWT_ROTATION_INTERVAL_MINUTES=1440
JWT_ROTATION_GRACE_MINUTES=120
BCRYPT_ROUNDS=12
AES256_KEY_B64=
EVENT_HMAC_SECRET=replace-with-strong-event-hmac
PSP_WEBHOOK_HMAC_SECRET=replace-with-strong-psp-hmac

# External APIs
FINTECH_API_URL=https://api.fintech.example.com
MOBILITY_API_URL=https://api.mobility.example.com
ESG_API_URL=https://api.esg.example.com
SOCIAL_API_URL=https://api.social.example.com
GREENOS_MODEL_VERSION=greenos-co2-v1
GREENOS_METHODOLOGY_ID=IPCC-ADEME-LOCAL-v1
GREENOS_COUNTRY_FACTORS_JSON={"CI":{"thermal_factor_local":0.192,"ev_factor_local":0.054},"SN":{"thermal_factor_local":0.187,"ev_factor_local":0.061},"KE":{"thermal_factor_local":0.171,"ev_factor_local":0.032}}
GREENOS_SIGNING_SECRET=replace-with-strong-greenos-signing-secret
GREENOS_SIGNING_ACTIVE_KEY_VERSION=v1
GREENOS_SIGNING_KEYS_JSON={"v1":"replace-with-strong-greenos-signing-secret"}
GREENOS_MRV_BASELINE_REFERENCE=distance_km * thermal_factor_local baseline
GREENOS_MRV_EMISSION_FACTOR_SOURCE=GREENOS_COUNTRY_FACTORS_JSON
GREENOS_MRV_METHODOLOGY_DESCRIPTION=Avoided CO2 = distance_km * (thermal_factor_local - ev_factor_local).

# Observability Settings
ENVIRONMENT=development
LOG_LEVEL=INFO

# Metrics (Prometheus)
METRICS_ENABLED=true

# Tracing (OpenTelemetry)
TRACING_ENABLED=true
JAEGER_HOST=localhost
JAEGER_PORT=14268
JAEGER_ENDPOINT=
ZIPKIN_ENDPOINT=

# Audit Logging
AUDIT_ENABLED=true
AUDIT_LOG_FILE=/var/log/beryl/audit.log
AUDIT_SECRET_KEY=replace-with-strong-hmac-key
AUDIT_CHAIN_ENABLED=true

# Event Bus
EVENT_BUS=mock  # Options: mock, kafka, rabbitmq

# Kafka (if EVENT_BUS=kafka)
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_CONSUMER_GROUP_PREFIX=beryl-core
KAFKA_ENVIRONMENT=dev
KAFKA_CONSUMER_TOPICS=fintech.transaction.completed,fintech.payment.failed,fintech.suspicious.activity
KAFKA_MANUAL_COMMIT_ONLY=true
KAFKA_REQUIRED_SIGNED_TOPICS=fintech.transaction.completed,fintech.payment.failed,fintech.suspicious.activity
KAFKA_SCHEMA_REGISTRY_PATH=config/event_schemas.json
KAFKA_DLQ_RETENTION_MS=604800000

# RabbitMQ (if EVENT_BUS=rabbitmq)
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# Legacy alias (backward compatibility)
ENV=development

# Security middleware
CORRELATION_ID_REQUIRED=true
NONCE_TTL_SECONDS=300
NONCE_MAX_SKEW_SECONDS=300
ENFORCE_TLS=false
CORS_ALLOWED_ORIGINS=https://app.beryl.local
CORS_ALLOW_CREDENTIALS=true
REDIS_URL=redis://localhost:6379/0
RATE_LIMIT_REQUESTS=120
RATE_LIMIT_WINDOW_SECONDS=60

# Compliance
COMPLIANCE_RISK_THRESHOLD=70
COMPLIANCE_TRANSACTION_AMOUNT_THRESHOLD=10000
SANCTIONS_LIST_PATH=security/sanctions_list.json

# BFOS (Revenue/Fee/FX)
BFOS_INTERNAL_TRANSFER_FEE_RATE=0.01
BFOS_DIASPORA_FEE_RATE=0.02
BFOS_CERTIFIED_STATEMENT_FEE_RATE=0.01
BFOS_TONTINE_FEE_RATE=0.01
BFOS_FX_DEFAULT_USD_XOF_RATE=610
BFOS_FX_FEE_RATE=0.01
BFOS_FX_MARGIN_RATE=0.005
BFOS_STATEMENT_CURRENCY=XOF
BFOS_STATEMENT_VERIFICATION_BASE_URL=/api/v1/fintech/statements
BFOS_STATEMENT_SIGNING_ALGORITHM=ECDSA_SHA256
BFOS_STATEMENT_SIGNING_PRIVATE_KEY_B64=
BFOS_TONTINE_MAX_MEMBERS=10
BFOS_TONTINE_SECURITY_CODE_PEPPER=replace-with-strong-tontine-pepper
BFOS_TONTINE_CURRENCY=XOF
BFOS_TONTINE_DEFAULT_REPUTATION_SCORE=50
BFOS_TONTINE_LATE_PENALTY_RATE=0.01
